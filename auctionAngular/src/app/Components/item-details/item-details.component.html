<div class="navbar component-navbar navbar-item px">
  <div class="navbar-brand">SINGLE PRODUCT</div>
  <nav aria-label="breadcrumb" class="justify-content-end bg-transparent">
    <ol class="breadcrumb navbar-item">
      <li class="breadcrumb-item">SHOP</li>
      <li class="breadcrumb-item active" aria-current="page">{{item.category?.categoryName}}</li>
    </ol>
  </nav>
</div>
<div *ngIf="currentUser==null" class="alert alert-info" role="alert">
  Login or register to make a bid!
</div>
<div *ngIf="show">
  <div *ngIf="highest" class="alert alert-success" role="alert">
    Congrats! You are the highest bidder!
  </div>
  <div *ngIf="!highest" class="alert alert-warning" role="alert">
    There are higher bids than yours. You could give a secon try!
  </div>
</div>
<div class="container mx">
  <div class="row">

    <div class="col-lg-5 col-sm-5">
      <div>
        <img src="{{item.images[0].url}}" class="card-img-top col" alt="">
      </div>
      <!--<hr>
      <div class="row">
        <div class="col-xs-3 col-sm-3 col-3 mb-1 p-1">
          <img src="https://placehold.it/300x300" class="card-img-top" alt="">
        </div>
        <div class="col-xs-3 col-sm-3 col-3 mb-1 p-1">
          <img src="https://placehold.it/300x300" class="card-img-top" alt="">
        </div>
        <div class="col-xs-3 col-sm-3 col-3 mb-1 p-1">
          <img src="https://placehold.it/300x300" class="card-img-top" alt="">
        </div>
        <div class="col-xs-3 col-sm-3 col-3 mb-1 p-1">
          <img src="https://placehold.it/300x300" class="card-img-top" alt="">
        </div>
      </div>-->
    </div>
    <div class="col-lg-7 col-sm-7">
      <h2>{{item.name}}</h2>
      <h5>Start from - ${{item.startPrice}}</h5>
      <div *ngIf="(currentUser!=null)&&(item.seller?.id!=currentUser.id)">
        <form (ngSubmit)="makeBid()" [formGroup]="bidForm" class="form-inline">
          <input type="number" formControlName="price" class="form-control input-price p-1"
            [ngClass]="{ 'is-invalid': submitted && f.price.errors }" />
          <input type="submit" class="btn btn-purple-outline ml-2" value="PLACE BID >" />
          <div *ngIf="submitted && f.price.errors" class="invalid-feedback">
            <div *ngIf="f.price.errors.required">Price is required</div>
            <div *ngIf="f.price.errors.min">Higher value required</div>
          </div>
        </form>
        <p>Enter ${{item.currentPrice+10}} or more</p>
      </div>

      <p><br><br>
        Highest bid: <mark>${{item.currentPrice}}</mark>
      <br>
        No bid: {{(itemBids?.length || 0)+1}}<br>
        End date: {{item.endDate | date: 'd MMM yyyy'}} <br>
      </p>
      <button class="btn btn-watchlist">Watchlist <i class="fa fa-heart"></i></button>
      <br>
      <h6 class="my-2">Details</h6>
      <hr>
      <p>{{item.description}}</p>
    </div>
  </div>
  <div *ngIf="currentUser" class="row my-4">
    <div class="col-lg-12">
      <table class="my-table col-12">
        <thead>
          <tr>
            <th scope="col" class="pl-3">Bidder</th>
            <th scope="col"></th>
            <th scope="col">Date</th>
            <th scope="col">Price</th>
          </tr>
        </thead>
        <tbody *ngIf="hasBids">
          <tr *ngFor="let b of itemBids">
            <td class=""><img class="img-round" height="80" width="80" src="{{b.bidder.photo}}">
            </td>
            <td>{{b.bidder.firstName}} {{b.bidder.lastName}}</td>
            <td>{{b.bidTime | date:'d MMM yyyy'}}</td>
            <td>$ {{b.bidPrice}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div *ngIf="!hasBids" class="col-md-12 form-group">
      <div class="alert alert-info" role="alert">
        No bids made yet!
      </div>
    </div>
  </div>

</div>